<!DOCTYPE html>
<html>
  <head>
    <title>X in Node is Y in Rust: A guide to Rust for Javascript developers</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
    <link href="./styles/custom.css" rel="stylesheet"/>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# X in Node is Y in Rust
## A guide to Rust for Javascript developers

By @steveklabnik

(slides made extra awesome by @ag_dubs)

---
class: center, middle

### This talk is a *high-level guide* to various projects in the *Rust* ecosystem,

## drawing comparisons to the *Node.js* ecosystem.

---
class: center, middle

# Node.js is...

---
class: center, middle

# Rust is...

---
class: left, middle

> Rust is cool, but I don't know what to use it for.

---
class: center, middle

Rust can do many things, including some things JavaScript cannot do.

### But, to get started, why not use it to do the things you already know how to do?

---
class: center, middle

![cave adventure](img/cave.png)

---
class: center, middle

![a game](img/agame.jpg)

---
class: center, middle

### Learning by analogy is powerful.

---
class: middle, left

> Let's replace Node with Rust!

.author[you maybe?]

---
class: middle, left

> Let's replace Node with Rust!

.author[def not me]

---
class: center, middle

### Let's talk about common stuff in Node and how to do it in Rust!

---
class: left, middle

# Running Applications

`node` is `cargo run`:

```
$ node index.js
$ cargo run
```

---
class: middle, left

# Execution Model

Rust is ahead-of-time (AOT) compiled.

Node.js is interpreted.

V8 has no *direct* comparison, because Rust does not have a runtime.

---
class: middle, left

# Evented I/O

`libuv` is `mio`:

```rust
loop {
  poll.poll(&mut events, None).unwrap();

  for event in events.iter() {
      match event.token() {
          SERVER => {
              let _ = server.accept();
          }
```

Most Node programmers don't write `libuv`; most Rust programmers don't use
`mio` directly either.

---
class: middle, left

# Runtime and Event Loop

The Node runtime is Tokio, sort of:

```rust
let mut core = Core::new()?
let handle = core.handle();
let addr = "www.rust-lang.org".to_socket_addrs()?.next()?;

let socket = TcpStream::connect(&addr, &handle);

let request = socket.and_then(|socket| {
    tokio_io::io::write_all(socket, "DATA HERE".as_bytes());
});

core.run(request)?;
```

Event loop is explicit! This may change in the future.

---
class: middle, left

# Async

Promises are Futures:

```
// in Node
some_promise.then(foo).then(bar)

// in Rust
some_future.and_then(foo).and_then(bar)
```

There are technical differences but the core concept is the same.

---
class: middle, left

# Package Ecosystem

npm is Cargo, packages are crates, and the registry is `crates.io`:

```
$ npm install
$ cargo build
```

![crates.io](img/cratesio.png)

We do the "small modules philosophy" to *some* degree.

---
class: middle, left

# Web Server

`createServer` is `simple-server`:

```rust
extern crate simple_server;

use simple_server::Server;

fn main() {
    let host = "127.0.0.1";
    let port = "7878";

    let server = Server::new(|request, mut response| {
        println!("Request received. {} {}", request.method(), request.uri());
        Ok(response.body("Hello Rust!".as_bytes())?)
    });

    server.listen(host, port);
}
```

---
class: middle, left

# Express is... well, will be ✨

### COMING SOON!

---
class: middle, left

# Other Web Frameworks

There are also lots of other web frameworks:

* Rocket
* gotham
* rouille
* Shio
* Iron

No clear winners in this space yet!

---
class: middle, left

# HTTP

`request` is... `reqwest`:

```rust
let mut resp = reqwest::get("https://www.rust-lang.org")?;

let mut content = String::new();
resp.read_to_string(&mut content);

// This will POST a body of `foo=bar&baz=quux`
let params = [("foo", "bar"), ("baz", "quux")];
let client = reqwest::Client::new();
let res = client.post("http://httpbin.org/post")
    .form(&params)
    .send()?;
```

---
class: middle, left

# Testing and Asserts

`mocha` and `chai` are built in:

```rust
#[test]
fn testing_testing() {
    assert!(true);

    assert_eq!(5, 5);

    assert_ne!("Hello", "world"); // <- added by @ag_dubs!
}
```

---
class: middle, center

# the Rust standard library is small...

--

# ... but the JavaScript one is smaller

---
class: middle, left

# std Library

`lodash` is... built-in:

```
for i in 12..buffer.len() {
    let prediction = coefficients.iter()
        .zip(&buffer[i - 12..i])
        .map(|(&c, &s)| c * s as i64)
        .sum::<i64>() >> qlp_shift;
    let delta = buffer[i];
    buffer[i] = prediction as i32 + delta;
}
```

---
class: middle, left 

# Interactive Shells

Codepens are the Rust Playground:

[http://play.rust-lang.org](http://play.rust-lang.org)

---
class: middle, left

# Styles and Lints

`eslint`/`standard` are `rustfmt` and `clippy`:

```
$ cargo fmt
$ cargo clippy
```

---
class: middle, left

# Conferences

Rust has conferences!

* RustConf
* RustFest
* Rust Belt Rust

Not nearly as big as JavaScript... yet!

---
class: middle, left

# Governance

TC39/Node Foundation are the Rust teams:

* Core team + 9 others; Core is *not* the TSC
* Explicit moderation team + Code of Conduct since Day 1
* Rust has no foundation

---
class: middle, left

## Rust and Node together

You can extend Node *with* Rust via Neon!

```rust
fn hello(call: Call) → JsResult<JsString> {
    let val = JsString::new(call.scope, "hello, Node")
                       .unwrap();
    // ...
    Ok(val)
}
```

---
class: middle, center

### Rust and Node are ripe for comparision because they are both
# Empowering Technologies

---
class: middle, center

### Rust is not just empowering...
# it's Transformative

---
class: middle, center

### Learning Rust isn't about simply moving your skills from one place to another
# ... but also about growing and deepening them

---
class: middle, center

# Tomorrow, same time: WebAssembly!

---
class: middle, left

# Resources for learning Rust

- Rust Bridge
- Exercism.io
- The Book (by me + Carol)

---
class: middle, center

# Thanks!

@steveklabnik

    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
